AJS.toInit(function(c){if(!Confluence.Templates.Labels){return}var b=null;var d=function(){c("#"+b.id).find(".label-list").removeClass("editable");b.hide();return false};var a=function(){b=AJS.ConfluenceDialog({width:550,height:233,id:"edit-labels-dialog",onCancel:d});b.addHeader(AJS.I18n.getText("labels.name"));b.addPanel("Label Editor",AJS.renderTemplate("labels-dialog-div"));b.addCancel(AJS.I18n.getText("close.name"),d);b.addHelpText(AJS.I18n.getText("labels.dialog.shortcut.tip"),{shortcut:"l"});b.popup.element.find(".dialog-title").append(Confluence.Templates.Labels.helpLink());c("#add-labels-form").submit(function(g){var f=c("#labelsString");g.preventDefault();AJS.Labels.addLabel(f.val());f.focus()});c("#labelsString").keydown(function(f){if(f.keyCode==13){if(!AJS.dropDown.current){c("#add-labels-form").submit(f)}}});AJS.Labels.bindAutocomplete()};c("#rte-button-labels").click(function(f){AJS.Labels.openDialog()});c(".show-labels-editor").click(function(f){f.preventDefault();AJS.Labels.openDialog()});AJS.Labels.openDialog=function(){if(!b){a()}b.show();c("#"+b.id).find(".label-list").addClass("editable");c("#labelsString").val("").focus()}});