AJS.Group=AJS.Control.extend({init:function(){this.type=this.type||"Group";this.items=[];this.index=-1;this._assignEvents("instance",this)},addItem:function(a){this.items.push(a);this._assignEvents("item",a)},removeItem:function(b){var a=AJS.$.inArray(b,this.items);if(a<0){throw new Error("AJS.Group: item ["+b+"] is not a member of this group")}b.trigger("blur");if(a<this.index){this.index--}this.items.splice(a,1);this._unassignEvents("item",b)},removeAllItems:function(){for(var a=0;a<this.items.length;a++){this._unassignEvents("item",this.items[a]);this.items[a].trigger("blur")}this.index=-1;this.items.length=0;this._unassignEvents("keys",document)},shiftFocus:function(b){AJS.debug("Group.shiftFocus called with offset: "+b);if(this.index===-1&&b===1){b=0}if(this.items.length>0){var a=(Math.max(0,this.index)+this.items.length+b)%this.items.length;this.items[a].trigger("focus")}},prepareForInput:function(){this._assignEvents("keys",document)},_events:{instance:{focus:function(){if(this.items.length===0){return}if(this.index<0){this.items[0].trigger("focus")}else{this._assignEvents("keys",document)}},blur:function(){if(this.index>=0){this.items[this.index].trigger("blur")}else{this._unassignEvents("keys",document)}}},keys:{"keydown keypress":function(a){this._handleKeyEvent(a)}},item:{focus:function(b){var a=this.index;this.index=AJS.$.inArray(b.target,this.items);if(a<0){this.trigger("focus")}else{if(a!==this.index){this.items[a].trigger("blur")}}},blur:function(a){if(this.index===AJS.$.inArray(a.target,this.items)){this.index=-1;this.trigger("blur")}},remove:function(a){this.removeItem(a.target)}}},keys:{}});