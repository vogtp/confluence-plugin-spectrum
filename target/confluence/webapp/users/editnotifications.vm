<html>
	<head>
		<title>$generalUtil.htmlEncode($pageTitle)</title>

</head>

    #applyDecorator("root")
        #decoratorParam("context" "profile")
        #decoratorParam("mode"  "edit-notifications-profile")
        #decoratorParam("helper" $helper)
        $action.doDefault()     ## to reset the pagination on non-ajax calls to the page

        <body>
        <div class="watches">

             #set ($pageNotifications = $action.paginationSupport.page)
             #set ($spaceNotifications = $helper.action.spaceNotificationsForUser)

             #if ($pageNotifications.size() == 0 && $spaceNotifications.size() == 0)
                <p><em>$action.getText('not.watching.anything')</em></p>
                <br>
             #end

            <table class="tableview condensed">
                <tr>
                    <th colspan="2">$action.getText('space.watches')</th>
                    ##<span style="font-weight: bold;">$action.getText('space.watches')</span>
                </tr>

            #if ($spaceNotifications.size() > 0)
                #foreach ($notification in $spaceNotifications)
                    <tr>
                        <td class="tableview-action-text">
                            <img src="$staticResourceUrlPrefix/images/icons/contenttypes/space_16.png" height="16" width="16">
                            <a href="$req.contextPath/spaces/browsespace.action?key=$notification.space.key">$webwork.htmlEncode($notification.space.name)</a>
                            #if ($notification.type)
                                <span class="smalltext">($i18n.getText('space.watching.blogs.only'))</span>
                            #end


                        </td>

                        <td class="tableview-action-icon">
                            <div class="entity-watching" data-entity-id="$notification.space.key" data-entity-type="space">
                               <a class="icon icon-stop-watching" title="$action.getText('stop.watching.space')">Stop watching this space</a>
                               <a class="icon icon-start-watching hidden" title="$action.getText('start.watching.space')">Start watching this space</a>
                               <span class="icon icon-wait hidden">$i18NBean.getText('loading.name')</span>
                           </div>
                        </td>
                    </tr>
                #end
            </table>
            #else
            </table>
                <div>$action.getText('space.watch.instruction')</div>
            #end
            <br>

            <table class="tableview condensed">
                <tr>
                    <th colspan="2">$action.getText('page.watches')</th>
                    ##<span style="font-weight: bold;">$action.getText('page.watches')</span>
                </tr>

            #if ($pageNotifications.size() > 0)
                #foreach ($notification in $pageNotifications)
                <tr>
                    <td class="tableview-action-text">
                        #contentLink($notification.page)
                    </td>
                    <td class="tableview-action-icon">
                        <div class="entity-watching" data-entity-id="$notification.page.id" data-entity-type="page">
                           <a class="icon icon-stop-watching" title="$action.getText('stop.watching.page')">Stop watching this page</a>
                           <a class="icon icon-start-watching hidden" title="$action.getText('start.watching.page')">Start watching this page</a>
                           <span class="icon icon-wait hidden">$i18NBean.getText('loading.name')</span>
                       </div>
                    </td>
                </tr>

                #end

            </table>
                #pagination($action.paginationSupport "${req.contextPath}/users/viewnotifications.action?")
            #else
                </table>
                <div>$action.getText('page.watch.instruction')</div>
            #end

            <br>
            <div class="page-instructions">For email notification options, go to the <a href="viewmyemailsettings.action">email settings</a> page.</div>
        </div>## watches
        </body>
    #end
</html>


