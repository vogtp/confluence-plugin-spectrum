(function(a){AJS.ResultGrid=AJS.Control.extend({init:function(k){this.type=this.type||"ResultGrid";var b,d,g,i,j,f,e;d=k.gridContainer||a(k.baseElement).find(".data-table");if(!d.length){AJS.debug("gridContainer for AJS.ResultGrid not found!")}g=function(l){return l.id};b=new AJS.SelectGrid({gridContainer:d,columns:k.columns,selectionCallback:k.selectionCallback,getRowId:k.getRowId||g,dontShiftFocus:k.dontShiftFocus});f=k.messageHandler||AJS.MessageHandler({baseElement:a(k.baseElement).find(".message-panel")});function c(o,m){if(i){return}var n,p,q,l;l=60;q=13;n=o/2-(l+q);p=m/2-(l+q);o=o-n;m=m-p;j=AJS("div").addClass("spinner-container").width(o).height(m).css({"padding-left":n,"padding-top":p}).insertAfter(d);i=Raphael.spinner(j[0],l,"#666")}function h(){if(i){i();j.remove();i=null}}e=k.noResultMessage||AJS.I18n.getText("result.grid.no.result.message");a.extend(this,{update:function(m,l){f.clearMessages();h();b.clear();if(!m||!m.length){b.hide();var n=a.isFunction(e)?e(l):e;f.displayMessages(n);return false}b.update(m);b.show();return true},updateAndSelect:function(n,m,l){if(this.update(n,m)){this.selectIndex(l)}},prependAndSelect:function(m,l){if(!m||!m.length){AJS.debug("ResultGrid.prependAndSelect called with no data, returning.");return}f.clearMessages();b.prependAndSelect(m,l);b.show()},select:function(l){b.select(l)},selectIndex:function(l){b.selectIndex(l)},clear:function(){f.clearMessages();b.hide()},loading:function(){b.show();var m=d.width();var l=d.height();this.clear();c(m,l)},isVisible:function(){return b.isVisible()}})}})})(AJS.$);